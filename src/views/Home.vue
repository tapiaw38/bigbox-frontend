<template>
  <div class="container">
    <div class="card-group">
      <!-- card componnet -->
      <card v-for="{ id, title, activity, points } in activities" :key="id">
        <template v-slot:card-image>
          <div class="content-image">
            <img :src="JSON.parse(activity).image[0]" alt="" />
          </div>
        </template>

        <template v-slot:card-title>
          <div class="content-middle">
            <h1>{{ title }}</h1>
            <svg
              width="14"
              height="16"
              viewBox="0 0 14 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M3.33792 4.66668C3.33792 3.94148 3.543 3.23257 3.92722 2.62959C4.31144 2.02661 4.85755 1.55665 5.49649 1.27912C6.13542 1.0016 6.83849 0.928991 7.51678 1.07047C8.19507 1.21195 8.81812 1.56117 9.30714 2.07396C9.79616 2.58675 10.1292 3.24009 10.2641 3.95135C10.399 4.66262 10.3298 5.39986 10.0651 6.06986C9.80047 6.73985 9.35229 7.31251 8.77727 7.7154C8.20224 8.1183 7.52619 8.33335 6.83461 8.33335C7.58074 8.33531 8.32158 8.46479 9.02799 8.71668C9.88314 8.20875 10.5539 7.41828 10.9356 6.4686C11.3173 5.51892 11.3885 4.46346 11.138 3.4669C10.8875 2.47035 10.3295 1.58876 9.55106 0.959705C8.77258 0.330647 7.81742 -0.010498 6.83461 -0.010498C5.85181 -0.010498 4.89664 0.330647 4.11816 0.959705C3.33968 1.58876 2.78168 2.47035 2.53122 3.4669C2.28076 4.46346 2.35193 5.51892 2.73363 6.4686C3.11533 7.41828 3.78608 8.20875 4.64123 8.71668C5.34764 8.46479 6.08848 8.33531 6.83461 8.33335C5.90723 8.33335 5.01783 7.94704 4.36208 7.25941C3.70632 6.57177 3.33792 5.63914 3.33792 4.66668Z"
                fill="#464646"
              />
              <path
                d="M0 15.5001C0 15.6327 0.0502364 15.7599 0.139658 15.8537C0.229079 15.9475 0.35036 16.0001 0.476821 16.0001C0.603282 16.0001 0.724563 15.9475 0.813985 15.8537C0.903406 15.7599 0.953642 15.6327 0.953642 15.5001C0.955745 13.8653 1.576 12.2981 2.67841 11.1421C3.78082 9.98608 5.2754 9.33567 6.83444 9.33346C6.06412 9.33533 5.30717 9.12251 4.64106 8.7168C3.29059 9.20059 2.11768 10.1141 1.28577 11.33C0.453864 12.5459 0.0043954 14.0037 0 15.5001H0Z"
                fill="#464646"
              />
              <path
                d="M11.5868 11.3751C11.7139 11.1835 11.8729 11.0085 12.0159 10.8335C11.2157 9.86347 10.1847 9.13313 9.02785 8.7168C8.36174 9.12251 7.60479 9.33533 6.83447 9.33346C8.39351 9.33567 9.88809 9.98608 10.9905 11.1421C12.0929 12.2981 12.7132 13.8653 12.7153 15.5001C12.7153 15.6327 12.7655 15.7599 12.8549 15.8537C12.9443 15.9475 13.0656 16.0001 13.1921 16.0001C13.3186 16.0001 13.4398 15.9475 13.5293 15.8537C13.6187 15.7599 13.6689 15.6327 13.6689 15.5001C13.6666 14.1401 13.2915 12.8095 12.5881 11.6668C12.5086 11.7835 12.4133 11.8918 12.3338 12.0085C12.1191 11.7564 11.8668 11.5425 11.5868 11.3751Z"
                fill="#464646"
              />
              <path
                d="M6.83449 8.33325C6.08836 8.33521 5.34752 8.46469 4.64111 8.71659C5.30798 9.12032 6.06445 9.33287 6.83449 9.33287C7.60453 9.33287 8.361 9.12032 9.02787 8.71659C8.32146 8.46469 7.58062 8.33521 6.83449 8.33325Z"
                fill="#464646"
              />
              <path
                d="M11.5869 11.375C11.8658 11.5373 12.118 11.7455 12.3339 11.9917C12.4134 11.875 12.5088 11.7667 12.5882 11.65C12.4142 11.36 12.2231 11.0817 12.0161 10.8167C11.873 11.0083 11.7141 11.1833 11.5869 11.375Z"
                fill="#464646"
              />
            </svg>
          </div>
        </template>

        <template v-slot:card-location>
          <div
            class="content-location"
            v-for="(location, index) in JSON.parse(activity).locations"
            :key="index"
          >
            <svg
              width="9"
              height="15"
              viewBox="0 0 9 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M4.49973 5.99633C3.93945 5.99633 3.46416 5.53767 3.46416 4.96031C3.46416 4.40003 3.92236 3.92474 4.49973 3.92474C5.06047 3.92474 5.53576 4.38294 5.53576 4.96031C5.53576 5.53767 5.06047 5.99633 4.49973 5.99633ZM4.49973 3.1604C3.51498 3.1604 2.7002 3.97564 2.7002 4.9604C2.7002 5.94562 3.51498 6.76086 4.49973 6.76086C5.48495 6.76086 6.29973 5.94562 6.29973 4.9604C6.29973 3.97564 5.48495 3.1604 4.49973 3.1604Z"
                fill="#FF6C5E"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M4.49975 13.0946L1.18843 6.67566C0.916837 6.1491 0.780579 5.57173 0.780579 4.96065C0.780579 2.90568 2.46233 1.22485 4.51684 1.22485C6.57134 1.22485 8.25263 2.90568 8.25263 4.96065C8.25263 5.5551 8.11684 6.13247 7.84524 6.65857L4.49975 13.0946ZM9 4.96068C9 2.48123 6.97921 0.460449 4.49977 0.460449C2.02078 0.460449 0 2.48123 0 4.96068C0 5.67384 0.169515 6.4041 0.509007 7.03227L4.16028 14.1136C4.22818 14.2494 4.36397 14.3173 4.49977 14.3173C4.63557 14.3173 4.77182 14.2323 4.83926 14.1136L6.67344 10.5729L8.50762 7.03227C8.83002 6.38701 9 5.67384 9 4.96068Z"
                fill="#FF6C5E"
              />
            </svg>
            <p>{{ location.address }}, {{ location.province }}</p>
          </div>
        </template>

        <template v-slot:card-description>
          <p>{{ JSON.parse(activity).category }}</p>
        </template>

        <template v-slot:card-pointer>
          <h2 class="pointer">{{ points }} Puntos</h2>
        </template>
      </card>
    </div>

    <div class="paginate"></div>
  </div>
</template>

<script>
//components
import Card from "@/components/Card.vue";
// api
import bigboxApi from "../api/bigboxApi";

export default {
  name: "Home",
  components: {
    Card,
  },
  data() {
    return {
      activities: [],
      page: 1,
      limit: 9,
    };
  },
  methods: {
    async getActivity() {
      try {
        let res;
        res = await bigboxApi.get(
          `activity?_page=${this.page}&_limit=${this.limit}`
        );

        console.log(res.data);

        this.activities = res.data;
      } catch (error) {
        console.log(error);
      }
    },
  },
  mounted() {
    this.getActivity();
  },
};
</script>

<style lang="scss" scoped>
.container {
  margin-top: 5%;
  margin-left: 13%;
  margin-right: 13%;
}
.card-group {
  @include grid(3);
  gap: 0.9em;
  @media (max-width: 750px) {
    @include grid(1);
  }
  h1,
  p {
    text-align: left;
    font-size: 0.8em;
    font-weight: lighter;
    margin: 2%;
  }
  h1 {
    font-size: 0.9em;
    font-weight: bold;
  }

  img {
    width: 100%;
    object-fit: cover;
    height: max(2rem, 30vh);
  }
}
.content-image {
  background-color: #f5f5f5;
  height: max(2rem, 30vh);
}
.pointer {
  margin: 2%;
  font-size: 0.9em;
  font-weight: lighter;
  text-align: left;
}
.content-middle {
  width: 100%;
  display: flex;
  justify-content: space-between;
  position: relative;
  svg {
    margin: 3%;
  }
}
.content-location {
  display: flex;
  align-items: center;
  svg {
    margin-left: 2%;
    margin-right: 1%;
  }
}
</style>
